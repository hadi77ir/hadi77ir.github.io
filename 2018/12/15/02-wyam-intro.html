<!DOCTYPE html>
<html lang="fa-IR" dir="rtl">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <link rel="stylesheet" type="text/css" href="/assets/css/main.css" />
    <link rel="stylesheet" type="text/css" href="/assets/css/persian.css" />

    <link rel="icon" href="/assets/images/logo.png">
    <title>مقدمه‌ای بر تولید محتوای ایستا | محمدهادی حسین‌پور</title>
    <link rel="alternate" type="application/atom+xml" href="/atom.xml" />

    <meta name="description" content="آیا زمان آن نرسیده که از WordPress فاصله بگیریم؟">
</head>

<body class="no-js persian layout-post">
    <div id="header-wrapper">
        <header id="header">
            <div class="inner">
                <h1 class="site-title"><a href="/"><img src="/assets/images/avatar.jpg" class="avatar" /><span class="title">محمدهادی حسین‌پور</span></a></h1>
                <nav class="social-media">
                    <ul class="social">
                        <li>
                            <a href="#" class="night-mode">
                                <i class="feather feather-sun day" aria-label="روز"></i>
                                <i class="feather feather-moon night" aria-label="شب"></i>
                            </a>
                        </li>
                        <li>
                            <a href="https://twitter.com/_hadi77ir"><i class="feather feather-twitter" aria-label="توییتر"></i></a>
                        </li>
                        <li>
                            <a href="https://github.com/hadi77ir"><i class="feather feather-github" aria-label="گیت‌هاب"></i></a>
                        </li>
                        <li>
                            <a href="https://t.me/hadi77ir_channel"><i class="feather feather-send" aria-label="کانال تلگرام"></i></a>
                        </li>
                        <li>
                            <a href="https://forms.gle/AufCXgNGT79fYcE97"><i class="feather feather-mail" aria-label="تماس با ایمیل"></i></a>
                        </li>
                        <li>
                            <a href="/atom.xml"><i class="feather feather-feed" aria-label="خوراک ATOM"></i></a>
                        </li>
                    </ul>
                </nav>
            </div>
        </header>
    </div>


    
        
        <main id="post-content" class="main-content">
            
<article class="post single">
    <header class="post-header">
        <h1 class="post-title">مقدمه‌ای بر تولید محتوای ایستا</h1>
        
        <h2 class="post-description">آیا زمان آن نرسیده که از WordPress فاصله بگیریم؟</h2>
        
        <div class="post-details">
            <div class="post-meta">
                <span class="u-noWrap" data-tooltip="">
                    
                    <time class="u-inlineBlock u-lineHeightBase">24 آذر 1397</time>
                    <span class="middotDivider"></span>
                    
                    <span class="readingTime" title="15 دقیقه"></span>
                </span>
            </div>
            <ul class="post-actions">
                <li>
                    <a href="/2018/12/15/02-wyam-intro.html"><i class="linea linea-basic-link" aria-label="پیوند یکتا"></i></a>
                </li>
                <li>
                    <a href="https://www.addtoany.com/share"><i class="linea linea-basic-share" aria-label="به‌اشتراک‌گذاری"></i></a>
                </li>
            </ul>
        </div>
    </header>
    

    <div class="post-content">
        <p>طراحی و پیاده‌سازی وب‌سایت این روزها با سیستم‌های مدیریت محتوا و علی‌الخصوص سیستم‌های مدیریت محتوای مشهوری چون جوملا، وردپرس، دروپال و امثالهم گره خورده است؛ اما آیا به جز وب‌سایت‌های پویا راه دیگری هم برای طراحی و پیاده‌سازی وب‌سایت وجود دارد؟</p>

<p>وب‌سایت‌ها به طور کلی و از نظر سرو شدن، به دو دسته <strong>ایستا</strong> و <strong>پویا</strong> تقسیم می‌شوند. تفاوت، در نحوه آماده‌سازی صفحات برای ارائه به مخاطب است.</p>

<p>در روش ایستا، صفحات از قبل آماده‌سازی و ذخیره شده اند و دقیقاً به همان شکلی که در پرونده‌ها ذخیره شده‌اند به مخاطب ارائه می‌شوند. در این روند، هیچ عمل سمت‌سروری جز خواندن بایت‌به‌بایت پرونده و نوشتن بایت‌به‌بایت بر روی اتصال برقرار شده صورت نمی‌گیرد. اولین وب‌سایت‌هایی که ایجاد شدند، وب‌سایت‌های ایستا بودند.</p>

<p>وب‌سایت پویا در مقابل، با «سیستم پرونده» سر و کار چندانی ندارد و از «پایگاه داده» برای ذخیره داده‌ها و سپس یک برنامه برای سرو کردن محتوا برای هر درخواست استفاده می‌کند. این دسته از صفحات وب می‌توانند شامل فرم‌ها، احراز هویت، پرداخت اینترنتی، محتوای متغیر و… باشند.</p>

<p>وب‌سایت‌هایی که مطلقاً از صفحات ایستا استفاده می‌کنند، مزیت‌هایی دارند:</p>

<ol>
  <li>میزبانی ارزان‌تر</li>
  <li>بسیار سریع‌تر</li>
  <li>عدم نیاز به پیکربندی</li>
  <li>عدم نیاز به پایگاه داده</li>
  <li>فاکتورهای امنیتی کمتر و امنیت بسیار بالاتر نسبت به سایت‌های پویا</li>
</ol>

<p>اما بزرگ‌ترین عیب آن‌ها، نیاز به دستکاری پرونده‌ها برای ایجاد تغییرات است. اگر وب‌سایت شما تغییرات زیادی داشته باشد، باید کل پرونده‌ها را ویرایش کرد و دوباره بارگذاری کرد.</p>

<p>اگر وب‌سایت شما شامل صفحاتی ساده است، پس استفاده از یک سیستم مدیریت محتوا مانند وردپرس اضافه کاری است، اگر به همه امکانات یک سیستم مدیریت محتوا احتیاج دارید، یک سیستم مدیریت محتوا نصب کنید اما برای یک وبلاگ ساده، نصب وردپرس زیاده‌روی است! برای یک وبلاگ ساده، استفاده از یک «مولد سایت ایستا» کافی است.</p>

<h3 id="مولد-سایت-ایستا-چیست">«مولد سایت ایستا» چیست؟</h3>

<p>در سال‌های اخیر ابزارهایی برای تسهیل تولید وب‌سایت‌های ایستا توسعه داده شده‌اند. این ابزارها با دریافت پرونده‌هایی به عنوان ورودی، صفحات وب ایستا را تولید می‌کنند که می‌توان پس از آن روی میزبان بارگذاری کرد.</p>

<h3 id="انتخاب-یک-مولد-سایت">انتخاب یک مولد سایت</h3>

<p>تا به امروز مولدهای مختلفی طراحی و پیاده‌سازی شده‌اند؛ در اکوسیستم‌های مختلف، اهداف مختلف، نشانه‌گذاری‌ها و قالب‌سازی‌های مختلف و…</p>

<p>جدول زیر تعدادی از آن‌ها را با یک‌دیگر مقایسه می‌کند.</p>

<table>
  <thead>
    <tr>
      <th>عنوان</th>
      <th>زبان</th>
      <th>محیط اجرا</th>
      <th>قالب</th>
      <th>ابزار ویرایشگر بصری</th>
      <th>مجوز</th>
      <th>تعداد ستاره‌ها</th>
      <th>تعداد فورک‌ها</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Jekyll</td>
      <td>Ruby</td>
      <td>Ruby</td>
      <td>Liquid</td>
      <td>Jekyll Admin</td>
      <td>MIT</td>
      <td>36k+</td>
      <td>7k+</td>
    </tr>
    <tr>
      <td>Next</td>
      <td>Javascript</td>
      <td>Node.js</td>
      <td>Javascript (React)</td>
      <td>Monaco Editor</td>
      <td>MIT</td>
      <td>32k+</td>
      <td>3k+</td>
    </tr>
    <tr>
      <td>Hugo</td>
      <td>Go</td>
      <td>Go</td>
      <td>Go</td>
      <td>Hoku CMS</td>
      <td>Apache 2.0</td>
      <td>30k+</td>
      <td>3k+</td>
    </tr>
    <tr>
      <td>Gatsby</td>
      <td>Javascript</td>
      <td>Node.js</td>
      <td>React</td>
      <td>-</td>
      <td>MIT</td>
      <td>28k+</td>
      <td>3k+</td>
    </tr>
    <tr>
      <td>Hexo</td>
      <td>Javascript</td>
      <td>Node.js</td>
      <td>ماژولار (EJS, Pug, Haml, Mustache, Twig و…)</td>
      <td>Hexo Editor / Hexo Admin</td>
      <td>MIT</td>
      <td>24k+</td>
      <td>3k+</td>
    </tr>
    <tr>
      <td>GitBook</td>
      <td>Javascript</td>
      <td>Node.js</td>
      <td>Jinja2</td>
      <td>GitBook Editor</td>
      <td>Apache 2.0</td>
      <td>19k+</td>
      <td>2k+</td>
    </tr>
    <tr>
      <td>Nuxt</td>
      <td>Javascript</td>
      <td>Node.js</td>
      <td>Vue</td>
      <td>-</td>
      <td>MIT</td>
      <td>16k+</td>
      <td>1k+</td>
    </tr>
    <tr>
      <td>Octopress</td>
      <td>Ruby</td>
      <td>Ruby</td>
      <td>Liquid</td>
      <td>-</td>
      <td>MIT</td>
      <td>1k+</td>
      <td>150+</td>
    </tr>
    <tr>
      <td>Wyam</td>
      <td>C#/.NET</td>
      <td>.NET Core</td>
      <td>ماژولار (Razor, Mustache, Liquid, PHP و..)</td>
      <td>-</td>
      <td>MIT</td>
      <td>900+</td>
      <td>150+</td>
    </tr>
  </tbody>
</table>

<p>از بین این ابزارها، ساده‌ترین و منعطف‌ترین آن‌ها در نظرم Wyam است. انتخاب از میان ابزارها به سلیقه شما بستگی دارد و احاطه شما بر زبان و محیط اجرای آن ابزار. اما اگر کاربر ویندوز هستید و اندک آشنایی با C#/.NET دارید، قصد طراحی سایت با Vue.js و React را ندارید و به دنبال ابزاری قدرتمند هستید؛ به شما Wyam را پیشنهاد می‌کنم.</p>

<h2 id="معرفی-wyam">معرفی Wyam</h2>

<p>Wyam با هدف پیاده‌سازی یک مولد <strong>محتوای</strong> ایستا با انعطاف بسیار بالا که از Razor <sup id="fnref:1" role="doc-noteref"><a href="#fn:1" class="footnote" rel="footnote">1</a></sup>  استفاده می‌کند، توسط Dave Glick در سال ۲۰۱۴ بنیان‌گذاری شد. این ابزار حول <a href="https://wyam.io/docs/concepts">مفهوم</a> «خطوط تولید» طراحی شده است که به آن انعطاف بسیار بالایی می‌بخشد.</p>

<p>از آن‌جایی که Wyam برای سکوی .NET Core ارائه شده، در صورت نصب بودن .NET Core می‌توان با دستور زیر آن را نصب کرد:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>dotnet tool install -g Wyam.Tool
</code></pre></div></div>

<p>یا اگر برای نصب راحت ابزارها روی ویندوز از Chocolatey استفاده می‌کنید، با دستور زیر می‌توانید آن را نصب کنید:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>choco install wyam
</code></pre></div></div>

<h3 id="روند-تولید">روند تولید</h3>

<p>Wyam بر اساس یک <strong>دستور پخت</strong> (Recipe) پوشه‌های ورودی را پردازش کرده و نهایتاً یک پوشه شامل خروجی به ما تحویل می‌دهد. هر دستور پخت شامل حداقل یک <strong>خط تولید</strong> (Pipeline) است و این خطوط تولید در کنار یکدیگر خروجی ما (که وب‌سایت است) را تشکیل می‌دهند.</p>

<p>شرح این دستور پخت، در پرونده پیکربندی که با نام <code class="language-plaintext highlighter-rouge">config.wyam</code> در پوشه پروژه فعلی است. این پرونده شامل یک اسکریپت به زبان C# است و شامل ارجاع‌ها به بسته‌های NuGet، اسمبلی‌های .NET، تعیین پیش‌فرض‌های دستور پخت، تغییرات در خطوط تولید دستور پخت (در صورت استفاده از دستور پخت‌های توکار) و یا ایجاد خطوط تولید جدید و… می‌شود. این اسکریپت در زمان تولید خروجی، با استفاده از سرویس کامپایلر Roslyn کامپایل شده و سپس فراخوانی می‌شوند.</p>

<p>هر خط تولید، از اتصال چندین ماژول به یک‌دیگر تشکیل می‌شود. معمولاً آخرین ماژول خط تولید بایستی خروجی را ذخیره کند. به عنوان مثال، عملکرد کلی خط تولید «صفحه هر مطلب وبلاگ» به این صورت است:</p>

<ol>
  <li>
    <p><strong>ReadFiles</strong>: از هر پوشه ورودی، پرونده‌های مارک‌داون پوشه <code class="language-plaintext highlighter-rouge">posts</code> را بگیر.</p>
  </li>
  <li>
    <p><strong>Markdown</strong>: آن‌ها را به HTML تبدیل کن.</p>
  </li>
  <li>
    <p><strong>Yaml</strong>: فراداده را از سرآغاز دریافت کن.</p>
  </li>
  <li>
    <p><strong>Razor</strong>:</p>

    <ol>
      <li>قالب مربوطه را از پوشه پوسته بیاور.</li>
      <li>کد HTML به‌دست‌آمده از تبدیل مارک‌داون را در قالب جای‌گذاری کن.</li>
      <li>داده‌های موجود در سرآغاز [^2]  پرونده مارک‌داون را در قالب جای‌گذاری کن.</li>
    </ol>
  </li>
  <li>
    <p><strong>WriteFiles</strong>: حاصل را ذخیره کن.
[^2]: در بخش نوشتن به این مسئله پرداخته شده است</p>
  </li>
</ol>

<p>در Wyam چندین دستورپخت آماده برای سرعت بخشیدن به روند تولید سایت پیش‌بینی شده است:</p>

<ol>
  <li>بلاگ (Blog)</li>
  <li>کتاب اینترنتی (BookSite)</li>
  <li>مستندات (Docs)</li>
  <li>وب (Web)</li>
</ol>

<p>هر دستور پخت می‌تواند از «پوسته» هم بهره ببرد. به عنوان مثال دستور پخت بلاگ پوسته‌های CleanBlog, Phantom و… را دارد که به صورت بسته NuGet منتشر شده‌اند.</p>

<h3 id="تولید-وبلاگ-ایستا">تولید وبلاگ ایستا</h3>

<p>برای تولید یک وبلاگ ایستا، می‌توانیم از دستورپخت بلاگ و یکی از پوسته‌های رسمی استفاده کنیم. یکی از پوسته‌هایی که Wyam در قالب بسته‌های NuGet در اختیار ما قرار داده است، CleanBlog است که در این مثال استفاده می‌کنیم. برای ایجاد وبلاگ از دستور زیر استفاده می‌کنیم:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>C:\myblog&gt; wyam new --recipe Blog
</code></pre></div></div>

<p>با اجرای این دستور، پروژه وبلاگ ایستا در پوشه فعلی (<code class="language-plaintext highlighter-rouge">C:\myblog</code>) ایجاد می‌شود. ساختار به وجود آمده به صورت زیر است:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>|- input/
|-- posts/
|--- first-post.md
|-- about.md
|- config.wyam
</code></pre></div></div>

<p>همان‌طور که از ساختار مشخص است، هر پروژه می‌تواند در پوشه ریشه خودش، چندین پوشه ورودی داشته باشد. نام <code class="language-plaintext highlighter-rouge">input</code> به عنوان پیش‌فرض پوشه ورودی توسط ابزار شناخته می‌شود. وارد پوشه <code class="language-plaintext highlighter-rouge">input</code> می‌شویم. در پوشه <code class="language-plaintext highlighter-rouge">posts</code> نوشته‌ها قرار می‌گیرند و همچنین صفحات مجزا در کنار پوشه <code class="language-plaintext highlighter-rouge">posts</code> و درون پوشه <code class="language-plaintext highlighter-rouge">input</code>. قالب این پرونده‌ها، مارک‌داون است.</p>

<p>پرونده <code class="language-plaintext highlighter-rouge">first-post.md</code> را باز می‌کنیم تا اولین نوشته خود را ویرایش کنیم.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Title: First Post
Published: 1/1/2016
Tags: Introduction
---
This is my first post!
</code></pre></div></div>

<p>از خط اول تا جایی که خط‌چین قرار دارد، جزء «سرآغاز» محسوب می‌شوند و از قالب YAML پیروی می‌کنند. سرآغاز، شامل فراداده مرتبط با این مطلب است و هنگام تولید خروجی، پس از خوانده شدن توسط ماژول YAML، مورد استفاده ماژول Razor برای جای‌گذاری درون قالب قرار می‌گیرند. پرکاربردترین فراداده‌های مورد استفاده در مطالب، همین ۳ عنوان هستند؛ به ترتیب: تیتر مطلب، زمان انتشار و برچسب‌ها. مطالبی که دارای فراداده «زمان انتشار» نباشند، «پیش‌نویس» تلقی شده و روی خروجی وبلاگ قرار نخواهند گرفت.</p>

<p>خط‌چین که شامل ۳ کاراکتر خط تیره است، سرآغاز را از محتوا جدا می‌کند و پس از خط‌چین، محتوای مطلب در قالب مارک‌داون قرار می‌گیرد.</p>

<p>برای صفحات جداگانه نیز قضیه به همین منوال است؛ با این تفاوت که فراداده‌های «برچسب» و «زمان انتشار» کاربردی ندارند.</p>

<h4 id="پیکربندی">پیکربندی</h4>

<p>نوبت انجام تنظیمات اولیه وبلاگ است. پرونده <code class="language-plaintext highlighter-rouge">config.wyam</code> را با یک ویرایشگر متن ساده یا حتی بهتر، یک ویرایشگر کد باز می‌کنیم. محتوای آن به صورت زیر است:</p>

<div class="language-c# highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="err">#</span><span class="n">recipe</span> <span class="n">Blog</span>

<span class="c1">// Customize your settings and add new ones here</span>
<span class="n">Settings</span><span class="p">[</span><span class="n">Keys</span><span class="p">.</span><span class="n">Host</span><span class="p">]</span> <span class="p">=</span> <span class="s">"host.com"</span><span class="p">;</span>
<span class="n">Settings</span><span class="p">[</span><span class="n">BlogKeys</span><span class="p">.</span><span class="n">Title</span><span class="p">]</span> <span class="p">=</span> <span class="s">"My Blog"</span><span class="p">;</span>
<span class="n">Settings</span><span class="p">[</span><span class="n">BlogKeys</span><span class="p">.</span><span class="n">Description</span><span class="p">]</span> <span class="p">=</span> <span class="s">"Welcome!"</span><span class="p">;</span>

<span class="c1">// Add any pipeline customizations here</span>
</code></pre></div></div>

<p>خط اول، دستور پخت را تعیین می‌کند. خطوط چهارم الی ششم، مقادیر اولیه فراداده را تعیین می‌کنند که هنگام جای‌گذاری در قالب کاربرد دارند. فراداده‌های تعیین‌شده به ترتیب «نام دامنه وبلاگ»، «عنوان وبلاگ» و «شرح وبلاگ» هستند. فهرست کامل فراداده‌های پشتیبانی‌شده توسط دستورپخت بلاگ را در <a href="https://wyam.io/api/wyam.blog/blogkeys/">اینجا</a> ببینید.</p>

<p>در پایان می‌توانیم تغییراتی در خطوط تولید و دستور پخت ایجاد کنیم که در بخش‌های بعدی به این امر می‌پردازیم.</p>

<h4 id="تولید-خروجی-و-پیشنمایش">تولید خروجی و پیش‌نمایش</h4>

<p>پس از انجام ویرایش‌ها، کافیست برای مشاهده پیش‌نمایشی از وبلاگ دستور زیر را اجرا کنیم تا ضمن تولید خروجی در پوشه <code class="language-plaintext highlighter-rouge">output</code>، سرور پیش‌نمایش روی آدرس <code class="language-plaintext highlighter-rouge">localhost:5080</code> راه‌اندازی شود:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>C:\myblog&gt; wyam . -p --theme CleanBlog
</code></pre></div></div>

<p>اگر بخواهیم فقط خروجی تولید شود، دستور زیر را اجرا می‌کنیم:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>C:\myblog&gt; wyam . --theme CleanBlog
</code></pre></div></div>

<p>خروجی در پوشه <code class="language-plaintext highlighter-rouge">output</code> قرار دارد، پس برای انتشار کافی است فقط محتویات این پوشه را روی هاست بارگذاری کنیم.</p>

<h3 id="شخصیسازی-و-تنظیم">شخصی‌سازی و تنظیم</h3>

<h4 id="ویرایش-پوستهها">ویرایش پوسته‌ها</h4>

<p>در Wyam، پوسته‌ها بر اساس دستورپخت طراحی و آماده می‌شوند و سپس در قالب یک بسته NuGet منتشر می‌شوند یا در پوشه <code class="language-plaintext highlighter-rouge">theme</code> در ریشه پروژه قرار می‌گیرند. بنابراین برای ویرایش پوسته‌ای که از طریق بسته NuGet استفاده می‌شود، باید بسته NuGet را به پوشه <code class="language-plaintext highlighter-rouge">theme</code> استخراج کنیم یا در صورت در اختیار داشتن کد منبع پوسته، آن را در پوشه <code class="language-plaintext highlighter-rouge">theme</code> کپی کنیم.</p>

<p>در مورد پوسته CleanBlog، روش دوم ساده‌تر و آسان‌تر است. از <a href="https://github.com/Wyamio/Wyam/tree/develop/themes/Blog/CleanBlog">اینجا</a> می‌توانید به کد منبع پوسته CleanBlog دسترسی داشته باشید. برای دریافت آن، می‌توانید کل کد Wyam را از گیت‌هاب به صورت zip دانلود کنید یا با clone کردن مخزن Wyam، پوشه مربوط به پوسته را کپی کنید.</p>

<p>پوسته‌های Wyam به زبان Razor نوشته می‌شوند که ترکیبی از C# و HTML است. برای استفاده از کد C# در پوسته‌ها می‌توان کد را به صورت یک کتابخانه کامپایل‌شده در آورد و سپس اسمبلی آن را در پیکربندی مورد ارجاع قرار دهیم.</p>

<p>برای آشنایی بیشتر با Razor پیشنهاد می‌کنم <a href="https://www.w3schools.com/asp/razor_intro.asp">اینجا</a> را بخوانید.</p>

<h4 id="پوسته-فارسی-cleanblog">پوسته فارسی CleanBlog</h4>

<p>پوسته‌های Wyam من‌جمله CleanBlog، به زبان انگلیسی و دارای تاریخ میلادی هستند. فارسی‌سازی پوسته کار خاصی به جز جایگزینی رشته‌های انگلیسی با فارسی ندارد، اما برای افزودن تاریخ هجری شمسی باید در جایی که تاریخ مطلب را جای‌گذاری کرده‌ایم، پیش از جای‌گذاری تاریخ را به صورت هجری شمسی در بیاوریم. برای این کار از کلاس <code class="language-plaintext highlighter-rouge">PersianDateTimeFormat</code> استفاده می‌کنیم (که آن را در <a href="https://github.com/hadi77ir/PersianDateTimeFormat">اینجا</a> به اشتراک گذاشته‌ام). برای راست‌چین کردن صفحات، از آن‌جایی که این پوسته برپایه Bootstrap 3 طراحی شده است، استفاده از <a href="https://github.com/bright/bootstrap-rtl">Bootstrap RTL Ondemand</a> گزینه مناسبی به نظر می‌رسد. پروژه نهایی را در <a href="https://github.com/hadi77ir/wyam-persian-blog-boilerplate">این مخزن</a> می‌توانید مشاهده کنید و از آن به عنوان پایه و اساس وبلاگ ایستای خود استفاده کنید :)</p>

<h4 id="شخصیسازی-خط-تولید">شخصی‌سازی خط تولید</h4>

<p>می‌توان از طریق مشخصه <code class="language-plaintext highlighter-rouge">Pipelines</code> تغییرات مدنظر را اعمال کرد. هر خط تولید یک نام منحصربه‌فرد دارد. برای پیدا کردن نام خطوط تولید هر دستور پخت می‌توانید به مستندات آن مراجعه کنید، به عنوان مثال خطوط تولید دستور پخت بلاگ از <a href="https://wyam.io/recipes/blog/pipelines">اینجا</a> قابل دسترس است. اگر خط تولیدی با نام <code class="language-plaintext highlighter-rouge">Name</code> را فرض کنید، تکه‌کدهای زیر برای انجام عملیات روی آن خط تولید قابل استفاده‌اند.</p>

<h5 id="افزودن-خط-تولید">افزودن خط تولید</h5>

<div class="language-c# highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">Pipelines</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="s">"New"</span><span class="p">,</span>
    <span class="nf">ModuleA</span><span class="p">(),</span>
    <span class="nf">ModuleB</span><span class="p">()</span>
<span class="p">);</span>
</code></pre></div></div>

<h5 id="حذف-خط-تولید">حذف خط تولید</h5>

<div class="language-c# highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">Pipelines</span><span class="p">.</span><span class="nf">Remove</span><span class="p">(</span><span class="s">"Name"</span><span class="p">);</span>
</code></pre></div></div>

<h5 id="جایگزینی-خط-تولید">جایگزینی خط تولید</h5>

<p>برای جایگزین کردن یک خط تولید، همه ماژول‌های آن را حذف می‌کنیم و ماژول‌های جدید را جایگزین می‌کنیم.</p>

<div class="language-c# highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">Pipelines</span><span class="p">[</span><span class="s">"Name"</span><span class="p">].</span><span class="nf">Clear</span><span class="p">();</span>
<span class="n">Pipelines</span><span class="p">[</span><span class="s">"Name"</span><span class="p">].</span><span class="nf">AddRange</span><span class="p">(</span>
    <span class="nf">ModuleA</span><span class="p">(),</span>
    <span class="nf">ModuleB</span><span class="p">()</span>
<span class="p">);</span>
</code></pre></div></div>

<h5 id="افزودن-خط-تولید-در-ترتیب-خاص">افزودن خط تولید در ترتیب خاص</h5>

<div class="language-c# highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">Pipelines</span><span class="p">.</span><span class="nf">InsertAfter</span><span class="p">(</span><span class="s">"PrevPipe"</span><span class="p">,</span> <span class="s">"Name"</span><span class="p">,</span>
    <span class="nf">ModuleA</span><span class="p">(),</span>
    <span class="nf">ModuleB</span><span class="p">()</span>
<span class="p">);</span>
</code></pre></div></div>

<h5 id="حذف-یک-ماژول-از-خط-تولید">حذف یک ماژول از خط تولید</h5>

<p>برای حذف یک ماژول براساس نام از یک خط تولید، به صورت زیر عمل می‌کنیم:</p>

<div class="language-c# highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">Pipelines</span><span class="p">[</span><span class="s">"PipelineName"</span><span class="p">].</span><span class="nf">Remove</span><span class="p">(</span><span class="s">"ModuleName"</span><span class="p">);</span>
</code></pre></div></div>

<p>برای حذف یک ماژول براساس اندیس ترتیب در خط تولید، به صورت زیر عمل می‌کنیم:</p>

<div class="language-c# highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">Pipelines</span><span class="p">[</span><span class="s">"PipelineName"</span><span class="p">].</span><span class="nf">RemoveAt</span><span class="p">(</span><span class="m">3</span><span class="p">);</span>
</code></pre></div></div>

<h5 id="افزودن-یک-ماژول-در-ترتیب-خاص-یا-جایگزینی-یک-ماژول-در-خط-تولید">افزودن یک ماژول در ترتیب خاص یا جایگزینی یک ماژول در خط تولید</h5>

<p>برای انجام این تغییرات باید از متدهای افزونه موجود در کلاس <code class="language-plaintext highlighter-rouge">ModuleListExtension</code> استفاده کنیم. این متدها توانایی افزودن و حذف کردن ماژول‌ها در خط تولید بر اساس نام ماژول، نوع و اندیس را می‌دهند. برای اطلاعات بیشتر، <a href="https://wyam.io/api/Wyam.Common.Modules/ModuleListExtensions">به مستندات مراجعه کنید</a>.</p>

<h3 id="چگونه-بنویسیم">چگونه بنویسیم؟</h3>

<p>برای نوشتن و نشانه‌گذاری در مارک‌داون، نیاز به ویرایشگر خاصی نیست و حتی Notepad برای این امر کفایت می‌کند. اما <a href="https://typora.io">Typora</a> یکی از بهترین ویرایشگرهای رایگان مارک‌داون است که امکانات مناسبی به یک نویسنده ارائه می‌کند؛ از جمله «حالت تمرکز» و «حالت ماشین تایپ». از بین همه ویرایشگرهای موجود، این برنامه با اندکی تغییرات (استفاده از یک پوسته سفارشی) می‌تواند برای نوشتن مطالب به زبان فارسی مناسب باشد. پوسته سفارشی این نرم‌افزار را از <a href="https://github.com/hadi77ir/Typora-Persian">اینجا</a> بگیرید و طبق دستورالعمل ذکر شده در مستندات فعال کنید. این پوسته در واقع یکی از پوسته‌های اصلی Typora است که راست‌چین شده و قلم آزاد <a href="http://rastikerdar.github.io/vazir-font/">وزیر</a> نیز به آن اضافه شده است.</p>

<h2 id="انتشار">انتشار</h2>

<p>برای انتشار سایت ایستا هزاران روش وجود دارد که به تعدادی از آن‌ها به اختصار می‌پردازم.</p>

<h3 id="هاست">هاست</h3>

<p>تمام میزبانی‌های وب (اعم از ویندوز، لینوکس و…) توانایی میزبانی وب‌سایت‌های ایستا را دارا هستند. بنابراین کافیست با استفاده از FTP یا راه‌های دیگر انتقال پرونده به هاست، محتویات پوشه خروجی را در ریشه سایت بارگذاری کنیم.</p>

<h3 id="سرور">سرور</h3>

<p>برای انتشار روی یک سرور، کافی است از یک سرور HTTP استفاده شود. سرورهای HTTP ساده مانند <a href="https://www.npmjs.com/package/serve">Serve</a> (در Node.js) یا <a href="https://docs.python.org/2/library/simplehttpserver.html">SimpleHTTPServer</a> (در پایتون) برای این کار کفایت می‌کنند؛ هر چند می‌توان از Lighttpd یا nginx برای بهره بردن از امکاناتی چون HTTPS و میزبانی سایت‌ها با دامنه‌های مختلف بهره برد اما مزیت اصلی سرور نسبت به هاست، در امکان تولید خروجی روی آن است. می‌توان تنها پوشه(های) ورودی را روی سرور با آخرین تغییرات به‌روزرسانی کرد و سپس خروجی را تولید کرد.</p>

<h3 id="netlify">Netlify</h3>

<p><a href="https://netlify.com">Netlify</a> سرویس میزبانی مخصوص سایت‌های ایستاست و یکی از بهترین‌ها برای میزبانی یک سایت ایستا به علت آسانی روند استقرار است. پلن رایگان آن برای وب‌سایت‌های شخصی و پروژه‌های متن‌باز ایده‌آل است: هر سایت در ابتدا یک زیردامنه از <code class="language-plaintext highlighter-rouge">netlify.com</code> است که می‌تواند دامنه اختصاصی خود را نیز داشته باشد. امکان استفاده از Let’s Encrypt با تمدید خودکار هم وجود دارد. انتشار در Netlify پس از ایجاد حساب کاربری، بسیار ساده است: پوشه خروجی را بکشید و در صفحه مدیریت سایت رها کنید. به همین سادگی! <a href="https://wyam.io/docs/deployment/netlify">در مستندات Wyam</a> درباره انتشار روی Netlify توضیحات بیشتری داده شده است.</p>

<h2 id="و-اما-بعد">و اما بعد…</h2>

<p>در آینده به نحوه استفاده از Git و یکپارچگی مداوم (CI) برای وب‌سایت ایستا خواهم پرداخت. با من همراه شوید :)</p>

<h2 id="برای-اطلاع-بیشتر">برای اطلاع بیشتر</h2>

<ol>
  <li><a href="https://www.staticgen.com">فهرست مولدهای سایت ایستا</a></li>
  <li><a href="https://hanselman.com/blog/ExploringWyamANETStaticSiteContentGenerator.aspx">معرفی Wyam توسط Scott Hanselman</a></li>
  <li><a href="https://wyam.io/docs/">مستندات Wyam</a></li>
  <li><a href="https://wyam.io/docs/deployment/netlify">Wyam و Netlify</a></li>
  <li><a href="https://www.sitepoint.com/7-reasons-not-use-static-site-generator/">۷ دلیل برای دوری جستن از مولدهای سایت ایستا</a></li>
</ol>

<div class="footnotes" role="doc-endnotes">
  <ol>
    <li id="fn:1" role="doc-endnote">
      <p>موتور نمایش طراحی شده برای ASP.NET MVC <a href="#fnref:1" class="reversefootnote" role="doc-backlink">&#8617;</a></p>
    </li>
  </ol>
</div>

    </div>

    <footer class="post-footer">
        <div class="post-meta">
            <ul class="post-tags">
                
                
                <li><a href="/tag/Wyam/">Wyam</a></li>
                
                <li><a href="/tag/سایت ایستا/">سایت ایستا</a></li>
                
                <li><a href="/tag/Static Site/">Static Site</a></li>
                
                <li><a href="/tag/dotnet/">dotnet</a></li>
                
                <li><a href="/tag/Netlify/">Netlify</a></li>
                
            </ul>
            <ul class="post-actions">
                <li>
                    <a href="/2018/12/15/02-wyam-intro.html"><i class="linea linea-basic-link" aria-label="پیوند یکتا"></i></a>
                </li>
                <li>
                    <a href="https://www.addtoany.com/share"><i class="linea linea-basic-share" aria-label="به‌اشتراک‌گذاری"></i></a>
                </li>
            </ul>
        </div>
        
    </footer>
</article>
        </main>
    
    <div id="footer-wrapper">
        <footer id="footer">
            <div class="inner">
                <div class="copyright">
                    <p>تمامی حقوق محفوظ است.
                        © 2021 محمدهادی حسین‌پور. محتوا تحت مجوز <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" title="CC-BY-NC-SA 4.0">CC-BY-NC-SA 4.0</a> منتشر شده است.</p>
                </div>
            </div>
        </footer>
    </div>

    <script>
        document.getElementsByTagName("body")[0].classList.replace("no-js", "js");
    </script>
    <script src="/assets/js/jquery.min.js"></script>
    <script src="/assets/js/slick.min.js"></script>
    <script src="/assets/js/resizesensor.js"></script>
    
    <script src="/assets/js/main.js"></script>
</body>
</html>